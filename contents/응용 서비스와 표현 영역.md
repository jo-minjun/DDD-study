# 6. 응용 서비스와 표현 영역

## 1. 표현 영역과 응용 영역

- 1장부터 5장까지는 도메인의 구성요소와 JPA를 이용한 리포지터리 구현 방법에 대한 내용을 주로 다뤘다.
- 도메인 영역을 잘 구현하지 않으면 사용자의 요구를 충족하는 제대로 된 소프트웨어를 만들지 못한다.
- 하지만 도메인 영역만 잘 만든다고 끝나는 것은 아니다. 도메인이 제 기능을 하려면 사용자와 도메인을 연결해주는 매개체가 필요하다.
- 2장 아키텍처에서 설명한 응용 영역과 표현 영역이 사용자와 도메인을 연결해 주는 매개체 역할을 한다.

![66.png](./img/66.png)

- 표현 영역은 사용자의 요청을 해석하고 응용 서비스의 결과를 응답한다.
  - 사용자가 웹 브라우저에서 폼에 ID와 암호를 입력한 뒤에 전송 버튼을 클릭하면 요청 파라미터를 포함한 HTTP 요청을 표현 영역에 전달한다.
  - 요청을 받은 표현 영역은 URL, 요청 파라미터, 쿠키, 헤더 등을 이용해서 사용자가 실행하고 싶은 기능을 판별하고 그 기능을 제공하는 응용 서비스를 실행한다.
  - 응용 서비스의 메서드가 요구하는 파라미터와 표현 영역이 사용자로부터 전달받은 데이터는 형식이 일치하지 않기 때문에 표현 영역은 응용 서비스가 요구하는 형식으로 사용자 요청을 변환한다.
    - 표현 영역의 코드는 다음과 같이 폼에 입력한 요청 파라미터 값을 사용해서 응용 서비스가 요구하는 객체를 생성한 뒤, 응요 서비스의 메서드를 호출한다.
    ```java
    @PostMapping("/member/join")
    public ModelAndView join(HttpServletRequest request) {
    	String email = request.getParameter("email");
    	String password = request.getParameter("password");
    	// 사용자 요청을 응용 서비스에 맞게 변환
    	JoinRequest joinReq = new JoinRequest(email. password);
    	// 변환한 객체를 이용해서 응용 서비스 실행
    	joinService.join(joinReq);
    	...
    }
    ```
  - 응용 서비스를 실행한 뒤에 표현 영역은 실행 결과를 사용자에게 알맞은 형식으로 응답한다.
    - 사용자 요청에 맞게 HTML이나 JSON 형식으로 응답할 것이다.
- 실제 사용자가 원하는 기능을 제공하는 것은 응용 영역에 위치한 서비스다.
  - 사용자가 회원 가입을 요청했다면 실제 그 요청을 위한 기능을 제공하는 주체는 응용 서비스에 위치한다.
  - 응용 서비스는 기능을 실행하는 데 필요한 입력 값을 메서드 인자로 받고 실행 결과를 리턴한다.
  - 사용자와 상호작용은 표현 영역이 처리하기 때문에, 응용 서비스는 표현 영역에 의존하지 않는다.
    - 응용 영역은 사용자가 웹 브라우저를 사용하는지 REST API를 호출하는지, TCP 소켓을 사용하는지를 알 필요가 없다.

## 2. 응용 서비스의 역할

## 3. 응용 서비스의 구현

## 4. 표현 영역

## 5. 값 검증

## 6. 권한 검사
